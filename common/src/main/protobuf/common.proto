syntax = "proto3";

package proto;

service MasterService {
	rpc SendWorkerData(WorkerData) returns (WorkerDataResponse);
}

service WorkerService {
	rpc GetSamples (SampleRequest) returns (Pivots);
	rpc StartSort (SortRequest) returns (SortResponse);
	rpc SendData (stream Entity) returns (DataResponse);
}

message WorkerData {
	int64 fileSize = 1;
	string workerAddress = 2;
}
message WorkerDataResponse {}

message SampleRequest {
	int64 offset = 1;
}

message Entity {
	string head = 1;
	string body = 2;
}

message Pivots {
	repeated string pivots = 1;
}

message SortRequest {
	Pivots pivots = 1;
	repeated string workerAddresses = 2;
}

message SampleResponse {
	repeated string pivots = 1;
}

message SortResponse {}
message DataResponse {}
